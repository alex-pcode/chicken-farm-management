<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="Chicken Manager" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Chicken Manager" />
    <meta name="description" content="Complete modern solution for data-driven chicken keeping" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#f8fafc" />
    
    <!-- React 19 Scheduler Fix -->
    <script>
      // Simple fix for React 19 scheduler issue
      if (typeof globalThis !== 'undefined' && typeof performance !== 'undefined') {
        globalThis.unstable_now = performance.now.bind(performance);
      }
    </script>

    <!-- Performance Resource Hints -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    
    <!-- Critical CSS inlined for immediate hero section rendering -->
    <style>
      /* Essential variables and font fallback */
      :root{--font-fraunces:'Fraunces','Fraunces-fallback','Times New Roman','Georgia',serif;--primary:oklch(0.205 0 0);}
      @font-face{font-family:'Fraunces-fallback';src:local('Times New Roman'),local('Georgia');size-adjust:108%;ascent-override:90%;descent-override:22%;line-gap-override:0%;}
      
      /* Essential body and typography - using self-hosted fonts with fallbacks */
      body{font-family:var(--font-fraunces);font-optical-sizing:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0;padding:0;background:#f9fafb;}
      h1,h2,h3{font-family:var(--font-fraunces);font-weight:600;line-height:1.2;letter-spacing:-0.02em;margin:0 0 1rem 0;}
      
      /* Critical hero section layout */
      .hero-section{position:relative;padding:2.5rem 1.5rem;background:#f9fafb;min-height:50vh;overflow:hidden;}
      @media(min-width:1024px){.hero-section{padding:4rem 2rem;min-height:60vh;}}
      
      /* Hero gradients */
      .hero-gradient-1{position:absolute;pointer-events:none;top:-25%;right:0%;width:35%;height:30%;background:radial-gradient(circle,#4F39F6 0%,#191656 70%);filter:blur(60px);opacity:0.3;}
      .hero-gradient-2{position:absolute;pointer-events:none;bottom:-20%;left:-10%;width:30%;height:25%;background:radial-gradient(circle,#8833D7 0%,#2A2580 70%);filter:blur(50px);opacity:0.2;}
      
      /* Critical CTA button */
      .shiny-cta{background:linear-gradient(135deg,#4F39F6,#7C3AED);color:#fff;border:none;border-radius:0.75rem;padding:1rem 2rem;font:inherit;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);overflow:hidden;position:relative;}
      .shiny-cta:hover{transform:translateY(-2px) scale(1.02);box-shadow:0 12px 24px rgba(79,57,246,0.3);}
      
      /* Hero image container */
      .hero-image-container{aspect-ratio:16/10;width:100%;position:relative;border-radius:1.5rem;overflow:hidden;box-shadow:0 35px 60px -12px rgba(0,0,0,0.25);}
      @media(min-width:768px){.hero-image-container{aspect-ratio:16/9;}}
      .hero-image-container img{width:100%;height:100%;object-fit:cover;transition:all 0.3s;}
      
      /* CSS-first responsive hero image */
      .hero-image-responsive{background-image:url('/screenshots/dashboard mobile.webp');background-size:cover;background-position:center;background-repeat:no-repeat;width:100%;height:100%;}
      @media(min-width:768px){.hero-image-responsive{background-image:url('/screenshots/dashboard desktop.webp');}}
      
      /* Essential utilities for immediate render */
      .container{width:100%;max-width:1200px;margin:0 auto;padding:0 1.5rem;}
      .text-center{text-align:center;}.relative{position:relative;}.absolute{position:absolute;}.inset-0{top:0;right:0;bottom:0;left:0;}.z-10{z-index:10;}
      .flex{display:flex;}.items-center{align-items:center;}.justify-center{justify-content:center;}.w-full{width:100%;}
      .text-4xl{font-size:2.25rem;line-height:2.5rem;}.text-lg{font-size:1.125rem;line-height:1.75rem;}.text-xl{font-size:1.25rem;line-height:1.75rem;}
      .mb-6{margin-bottom:1.5rem;}.mb-12{margin-bottom:3rem;}.max-w-5xl{max-width:64rem;}.mx-auto{margin-left:auto;margin-right:auto;}
      .px-6{padding-left:1.5rem;padding-right:1.5rem;}.py-10{padding-top:2.5rem;padding-bottom:2.5rem;}
      .text-gray-900{color:rgb(17,24,39);}.text-gray-600{color:rgb(75,85,99);}.bg-gray-50{background:rgb(249,250,251);}
      .font-bold{font-weight:700;}.leading-tight{line-height:1.25;}.leading-relaxed{line-height:1.625;}
      .pointer-events-none{pointer-events:none;}.overflow-hidden{overflow:hidden;}
      .bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops));}
      .from-purple-600{--tw-gradient-from:#9333ea;--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to,rgb(147 51 234 / 0));}
      .to-purple-800{--tw-gradient-to:#6b21a8;}.bg-clip-text{-webkit-background-clip:text;background-clip:text;}.text-transparent{color:transparent;}
      .modal-open{overflow:hidden;}
      
      @media(min-width:768px){.text-4xl{font-size:3rem;line-height:1;}.text-5xl{font-size:3.75rem;line-height:1;}.text-6xl{font-size:4.5rem;line-height:1;}.text-7xl{font-size:5rem;line-height:1;}}
    </style>
    <!-- Load main CSS asynchronously to prevent render blocking -->
    <script>
      // Async CSS loading function for non-critical styles
      function loadCSSAsync(href, media) {
        var link = document.createElement('link');
        link.rel = 'preload';
        link.href = href;
        link.as = 'style';
        link.media = media || 'all';
        link.onload = function() {
          this.onload = null;
          this.rel = 'stylesheet';
        };
        document.head.appendChild(link);
        
        // Fallback for browsers that don't support preload
        var noscript = document.createElement('noscript');
        var fallbackLink = document.createElement('link');
        fallbackLink.rel = 'stylesheet';
        fallbackLink.href = href;
        fallbackLink.media = media || 'all';
        noscript.appendChild(fallbackLink);
        document.head.appendChild(noscript);
      }
      
      // Load non-critical CSS after initial paint
      if ('requestIdleCallback' in window) {
        requestIdleCallback(function() {
          // Animation CSS will be loaded through dynamic import in the app
          // This ensures proper asset resolution in both dev and production
        }, { timeout: 1000 });
      } else {
        // Fallback for browsers without requestIdleCallback  
        setTimeout(function() {
          // Animation CSS will be loaded through dynamic import in the app
        }, 200);
      }
    </script>
    
    <!-- LCP Image Preload - Only on landing page with JavaScript detection -->
    <script>
      // Only preload hero images if we're likely on the landing page
      if (window.location.pathname === '/' || window.location.pathname.includes('landing')) {
        const isMobile = window.matchMedia('(max-width: 767px)').matches;
        const imageUrl = isMobile ? '/screenshots/dashboard mobile.webp' : '/screenshots/dashboard desktop.webp';
        const link = document.createElement('link');
        link.rel = 'preload';
        link.href = imageUrl;
        link.as = 'image';
        link.type = 'image/webp';
        document.head.appendChild(link);
      }
    </script>
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/pwa-192x192.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="/pwa-192x192.png" />
    <link rel="apple-touch-icon" sizes="512x512" href="/pwa-512x512.png" />
    
    <!-- Self-hosted fonts - no external requests needed -->
    <style>
      /* Self-hosted Fraunces font faces */
      @font-face {
        font-family: 'Fraunces';
        src: url('/fonts/fraunces-400.woff2') format('woff2');
        font-weight: 400;
        font-style: normal;
        font-display: optional;
      }
      @font-face {
        font-family: 'Fraunces';
        src: url('/fonts/fraunces-500.woff2') format('woff2');
        font-weight: 500;
        font-style: normal;
        font-display: optional;
      }
      @font-face {
        font-family: 'Fraunces';
        src: url('/fonts/fraunces-600.woff2') format('woff2');
        font-weight: 600;
        font-style: normal;
        font-display: optional;
      }
      @font-face {
        font-family: 'Fraunces';
        src: url('/fonts/fraunces-700.woff2') format('woff2');
        font-weight: 700;
        font-style: normal;
        font-display: optional;
      }
    </style>

    <!-- Optional: Preload critical font weights -->
    <link rel="preload" href="/fonts/fraunces-400.woff2" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="/fonts/fraunces-600.woff2" as="font" type="font/woff2" crossorigin>
    <title>Chicken Manager</title>
    <!--ssr-head-->
  </head>
  <body>
    <div id="root"><!--ssr-outlet--></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
