# Story 4.2: Hybrid Form Components with shadcn

## Status  
Ready for Development

## Story
**As a** developer,  
**I want** neumorphic-styled form components built on shadcn/ui foundations,  
**so that** I can create accessible forms with consistent visual design and enhanced functionality.

## Acceptance Criteria
1. Install shadcn form component dependencies
   - Add `form`, `input`, `label`, `select`, `textarea`, `button` components via shadcn CLI
   - Install `@radix-ui/react-form` for enhanced form state management
2. Create hybrid form components with neumorphic styling
   - Build `NeuInput` component with inset shadow styling and error state display
   - Build `NeuSelect` component with custom dropdown styling and keyboard navigation
   - Build `NeuButton` component with gradient styling and three variants (primary, secondary, ghost)
3. Implement form integration patterns
   - Create react-hook-form integration examples
   - Build consistent validation display and error handling
   - Implement form submission patterns with optimistic updates
4. Provide migration examples
   - Create enhanced EggCounter form using Epic 4 components
   - Document replacement strategy for existing `TextInput.tsx` and `SelectInput.tsx`

## Integration Verification
- IV1: All existing forms continue to work with identical behavior
- IV2: New components meet WCAG AA accessibility standards through Radix UI primitives
- IV3: Form validation and error states maintain current functionality
- IV4: Visual consistency preserved with neumorphic styling application

## Tasks / Subtasks
- [ ] Install shadcn form component dependencies (AC: 1)
  - [ ] Run `npx shadcn@latest add form input label select textarea button`
  - [ ] Install `npm install @radix-ui/react-form` for enhanced form management
  - [ ] Verify component imports and basic functionality
  - [ ] Test shadcn form components with default styling
- [ ] Create NeuInput hybrid component (AC: 2)
  - [ ] Build `src/components/epic4/forms/NeuInput.tsx`
  - [ ] Apply neumorphic inset shadow styling from `neuStyles.input`
  - [ ] Implement error state with red shadow variation
  - [ ] Add label support and accessibility attributes
  - [ ] Create TypeScript interface extending InputHTMLAttributes
- [ ] Create NeuSelect hybrid component (AC: 2)
  - [ ] Build `src/components/epic4/forms/NeuSelect.tsx`
  - [ ] Apply neumorphic styling to SelectTrigger and SelectContent
  - [ ] Implement custom dropdown with neumorphic background
  - [ ] Add keyboard navigation support through Radix UI
  - [ ] Create options prop interface for easy configuration
- [ ] Create NeuButton hybrid component (AC: 2)
  - [ ] Build `src/components/epic4/forms/NeuButton.tsx`
  - [ ] Implement primary variant with gradient styling (`neuStyles.button`)
  - [ ] Implement secondary variant with raised neumorphic effect
  - [ ] Implement ghost variant with subtle hover effects
  - [ ] Add size variants (sm, md, lg) with consistent styling
- [ ] Implement form integration patterns (AC: 3)
  - [ ] Create react-hook-form integration utilities
  - [ ] Build consistent validation display components
  - [ ] Implement error handling with neumorphic error styling
  - [ ] Create form submission patterns with optimistic updates
  - [ ] Add loading states and disabled styling for buttons
- [ ] Create migration examples (AC: 4)
  - [ ] Build enhanced EggCounter form using Epic 4 components
  - [ ] Create side-by-side comparison with existing form
  - [ ] Document component API and usage patterns
  - [ ] Create migration guide for `TextInput.tsx` and `SelectInput.tsx`
  - [ ] Provide transition timeline and rollback strategy
- [ ] Integration verification testing (All IVs)
  - [ ] Test existing forms remain functional (IV1)
  - [ ] Run accessibility testing with screen reader and keyboard navigation (IV2)
  - [ ] Verify form validation and error states work identically (IV3)
  - [ ] Validate visual consistency with neumorphic design system (IV4)

## Component Specifications

### NeuInput Component
```typescript
interface NeuInputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string
  error?: string
}
```
- **Styling**: Inset shadow with `#ecf0f3` background
- **Error State**: Red inset shadow variation
- **Accessibility**: Proper label association and ARIA attributes

### NeuSelect Component  
```typescript
interface NeuSelectProps {
  label?: string
  error?: string
  placeholder?: string
  value?: string
  onValueChange?: (value: string) => void
  options: { value: string; label: string }[]
}
```
- **Styling**: Neumorphic trigger with custom dropdown
- **Keyboard Navigation**: Full keyboard support via Radix UI
- **Options**: Simple array-based configuration

### NeuButton Component
```typescript
interface NeuButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'ghost'
  size?: 'sm' | 'md' | 'lg'
}
```
- **Primary**: Gradient background with shadow
- **Secondary**: Raised neumorphic effect
- **Ghost**: Transparent with hover states

## Technical Implementation Notes
- **Base Components**: Built on shadcn/ui + Radix UI for accessibility
- **Styling Strategy**: Neumorphic design tokens applied via `neuStyles` utilities
- **Form Integration**: Compatible with react-hook-form and existing validation patterns
- **Migration Approach**: Parallel development with existing components for safe transition

## Definition of Done
- [ ] All shadcn form dependencies installed and working
- [ ] NeuInput, NeuSelect, and NeuButton components created and tested
- [ ] Form integration patterns implemented and documented
- [ ] Enhanced EggCounter form example created
- [ ] Migration documentation completed
- [ ] All integration verifications pass
- [ ] Accessibility testing confirms WCAG AA compliance
- [ ] Visual regression testing shows no design inconsistencies